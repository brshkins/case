{% extends 'main/layout.html' %}

{% block title %}AI тест{% endblock %}

{% block main %}
<div class="test1-form-container">
  <h2 class="text-center mb-4">AI Тест по профориентации</h2>

  <form method="post" class="test1-form" onsubmit="showLoading()">
    {% csrf_token %}
    {% for question in questions %}
      <div class="test-question">
        <p><strong>{{ forloop.counter }}. {{ question.question }}</strong></p>
        <div class="test-options">
          {% for option in question.options %}
            <label>
              <input type="radio" name="answer_{{ forloop.parentloop.counter }}" value="{{ option }}" required>
              {{ option }}
            </label><br>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
    <button type="submit" class="test-submit-btn">Завершить</button>
  </form>

  <!-- Блок загрузки -->
  <div id="loading" style="display:none; text-align:center; margin-top:20px;">
    <div class="spinner-border text-light" role="status" style="width: 3rem; height: 3rem;">
      <span class="visually-hidden">Загрузка...</span>
    </div>
    <p class="mt-3">Анализируем ваши ответы, подождите...</p>
  </div>
</div>

<script>
function showLoading() {
    document.querySelector('.test1-form').style.display = 'none';
    document.getElementById('loading').style.display = 'block';
}
</script>
{% endblock %}